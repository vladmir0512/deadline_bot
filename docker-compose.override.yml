# Локальные настройки для разработки
# Этот файл автоматически используется docker-compose

version: '3.8'

services:
  deadline-bot:
    # Монтируем исходный код для hot-reload
    volumes:
      - ./bot.py:/app/bot.py
      - ./healthcheck.py:/app/healthcheck.py
      - ./logging_config.py:/app/logging_config.py
      - ./version.py:/app/version.py
      - ./scripts:/app/scripts
      - ./tests:/app/tests
    environment:
      - LOG_LEVEL=DEBUG  # Более подробное логирование в разработке
    # Перезапуск при изменении кода
    restart: unless-stopped

  healthcheck-server:
    volumes:
      - ./healthcheck.py:/app/healthcheck.py
      - ./logging_config.py:/app/logging_config.py
      - ./version.py:/app/version.py
      - ./scripts:/app/scripts
    environment:
      - LOG_LEVEL=DEBUG
    restart: unless-stopped

# Для локальной разработки можно добавить дополнительные сервисы
# services:
#   postgres:
#     image: postgres:15
#     environment:
#       POSTGRES_DB: deadlines
#       POSTGRES_USER: deadline_user
#       POSTGRES_PASSWORD: password
#     volumes:
#       - postgres_data:/var/lib/postgresql/data
#     ports:
#       - "5432:5432"

# volumes:
#   postgres_data: